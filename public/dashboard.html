<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Techniklager Dashboard</title>
<style>
  body { font-family: sans-serif; margin: 20px; }
  table { border-collapse: collapse; width: 100%; max-width: 600px; margin: auto; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background: #f0f0f0; }
  .out { background: #ffcccc; }
  .available { background: #ccffcc; }
</style>
</head>
<body>
<h1>ðŸ“‹ Inventory Dashboard</h1>
<table id="inventory">
  <tr><th>ID</th><th>Name</th><th>Status</th><th>Last Scanned</th></tr>
</table>

<script>
async function loadItems() {
  const res = await fetch('/api/items');
  const items = await res.json();
  const table = document.getElementById('inventory');
  table.querySelectorAll('tr:not(:first-child)').forEach(r => r.remove());

  for (const [id, item] of Object.entries(items)) {
    const row = table.insertRow();
    row.insertCell().textContent = id;
    row.insertCell().textContent = item.name;
    const statusCell = row.insertCell();
    statusCell.textContent = item.status;
    statusCell.className = item.status;
    row.insertCell().textContent = item.lastScanned ? new Date(item.lastScanned).toLocaleString() : '';
  }
}

loadItems();
setInterval(loadItems, 5000);
</script>
</body>
</html>
